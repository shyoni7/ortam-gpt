# ממשק הניהול – ORTAM AI

## גישה למערכת
- כתובת ברירת מחדל: `/admin` (למשל `http://localhost:3000/admin` בפיתוח או הדומיין שלכם ב-Vercel).
- הממשק נטען במצב RTL בעברית כברירת מחדל, וניתן להחליף לשפה האנגלית מהתפריט העליון.

## מבנה וניווט
- תפריט צדדי (RTL) מחולק לשתי קבוצות: **גלובלי** (שם מותג, תפריטים, Meta) ו-**עמודים** (בית, עלינו, אקדמיה, חממה, השמה, צור קשר).
- חיפוש בראש התפריט מאפשר קפיצה מהירה לשדות לפי תווית.
- בחירת פריט בתפריט פותחת את טופס העריכה במרכז. השדות מופיעים בסדר לוגי (כותרת → תיאור → מדיה → אוספים ייעודיים).
- לכל שדה ניתן לאפס ערך לברירת המחדל בעזרת כפתור **"איפוס שדה"** מימין לכותרת.
- בחלק העליון מופיעים: בחירת שפה, כפתור **"איפוס טופס"** (מחדש את הסקשן הנוכחי לערכי המקור) וכפתור **"שמור שינויים"**. סטטוס "יש שינויים שלא נשמרו" מוצג כאשר קיימות עריכות שלא נשמרו, וחלון הדפדפן יתריע לפני סגירה אם קיימים שינויים שלא נשמרו.

## מה ניתן לערוך
### גלובלי
- **שם המותג** – מופיע בניווט העליון והפוטר.
- **תפריט עליון / תפריט תחתון** – רשימות הניתנות להוספה, מחיקה וסידור (כפתורי ▲/▼). שדה ה-`order` מתעדכן אוטומטית.
- **Meta Defaults** – תבנית כותרת (`%s` יוחלף בכותרת העמוד) ותיאור ברירת מחדל.

### עמודים
כל העמודים חולקים שדות בסיסיים:
- `slug` (קריאה בלבד), `title`, `subtitle`, `body` (Markdown נתמך), תמונת Hero (URL+Alt), וגלריה (מערך תמונות עם אפשרות הוספה/סידור/מחיקה).

#### עמוד הבית
- בנוסף לשדות הבסיסיים: עריכת כפתורי ה-CTA הראשי והמשני (טקסט+קישור).

#### עמוד עלינו / חממה / השמה
- מסתמכים על שדות הבסיס (טקסטים חופשיים וגלריה) לצורך הצגת מידע מפורט באתר.

#### עמוד האקדמיה
- כולל רשימת **תוכניות**: כותרת, תיאור, תיוג מפגשים (לדוגמה "4 מפגשים") ותמונת תוכנית.

#### עמוד צור קשר
- שדות מגע (כתובת, טלפון, אימייל) + קונפיגורציית טופס: הפעלה/כיבוי, טקסט כפתור והודעת הצלחה.

## שמירת נתונים
- **פיתוח מקומי** (`npm run dev`): השמירה כותבת לקבצי JSON תחת `content/site.<locale>.json` ומעדכנת את המטמון בזיכרון.
- **Vercel / Production**: השמירה מבצעת קריאת GitHub API עם `PUT /contents` ומשייכת commit אוטומטי לענף שהוגדר.
- בכל מקרה לאחר שמירה מוצלחת התוכן נשמר בלקוח, ההתרעה נעלמת ו-toast ירוק יוצג.

### משתני סביבה נדרשים לפרודקשן
הגדירו ב-Vercel (או בסביבה אחרת):
- `GITHUB_TOKEN` – טוקן עם הרשאת `contents:write` למאגר.
- `GITHUB_REPO` – שם מלא של הרפו (לדוגמה `shyoni7/ortam-gpt`).
- `GITHUB_BRANCH` – הענף יעד (ברירת מחדל `main`).

## בדיקות מומלצות לאחר עדכון תוכן
1. רעננו את העמוד הציבורי לוודא שהשינויים נראים (למשל `/he` או `/en`).
2. ודאו שגלריות ותמונות נטענות – קישורים חייבים להיות URL מלאים.
3. בדקו שהטופס ב`/contact` מגיב עם הודעת הצלחה/שגיאה תואמת לשפה.

## טיפים נוספים
- שימרו לעיתים קרובות: שמירה מעדכנת גם את נקודת הבסיס להפעלת כפתורי האיפוס.
- Markdown מאפשר כותרות (`##`), רשימות ממוספרות ופריטים עם `-` – התצוגה באתר מעוצבת בהתאם.
- כל שינוי בשפת יעד נשמר באופן בלתי תלוי (עברו בין he ↔ en כדי לעדכן את שתי הגרסאות).
